!function(e,n){"object"==typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e.Templatize=n()}(this,function(){return{errorOnFuncFailure:!1,render:function(e,n,t,r){if(!e)return"";if(t){var i=!("_display"in n)||n._display;e=this.__renderSection(e,t,i),t+="."}else t="";var c={}.toString;for(var l in n){var o=n[l];if(o)switch(c.call(o)){case"[object Object]":e=this.render(e,o,t?t+l:l);continue;case"[object Array]":e=this.__renderRepeatingSection(e,l,o,t,r);continue;case"[object Function]":try{o=o.call(n,r)}catch(e){if(this.errorOnFuncFailure)throw e;o=""}}var s=t+l;e=(e=this.__renderSection(e,s,o,r)).replace(new RegExp("{{"+s+"}}","g"),o)}return e},__renderSection:function(e,n,t){t=0===t||t&&("string"!=typeof t||t.trim().length);for(var r="{{#"+n+"}}",i="{{^"+n+"}}",c="{{/"+n+"}}",l=0,o=r.length+c.length;!(e.length<o||l&&l+1>=e.length);){var s=e.indexOf(r,l),a=e.indexOf(i,l),f=~s&&(!~a||s<a),h=f?s:a,u=!!~h&&e.indexOf(c,h);if(!1===u||!~u)break;l=(t?f:!f)?(e=e.slice(0,h)+e.slice(h+c.length,u)+e.slice(u+c.length),u-c.length):(e=0===h?e.slice(u+c.length):e.slice(0,h)+e.slice(u+c.length),h)}return e},__renderRepeatingSection:function(e,n,t,r,i){r=r?r+"."+n:n;var c="{{#"+n+"}}",l="{{/"+n+"}}",o=e.indexOf(c),s=!!~o&&e.indexOf(l,o);if(!1===s||!~s)return e;for(var a=e.substring(o+c.length,s),f="",h=0;h<t.length;++h)f+=this.render(a,t[h],r,i);return 0===o?f+e.slice(s+l.length):e.slice(0,o)+f+e.slice(s+l.length)}}});