!function(e,n){"object"==typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e.Templatize=n()}(this,function(){return{errorOnFuncFailure:!1,__objTester:{}.toString,render:function(e,n){return this.__render(e,n)},__render:function(e,n,t){if(!e)return"";var r=null!=t;if(r){var i=!("_display"in n)||n._display;e=this.__renderSection(e,t,i)}for(var c in t=r?t+".":"",n)if("_display"!==c&&"_parent"!==c){var l=n[c];if(l)switch(this.__objTester.call(l)){case"[object Object]":l._parent||(l._parent=n),e=this.__render(e,l,t+c);continue;case"[object Array]":l._parent||(l._parent=n),e=this.__renderRepeatingSection(e,c,l,t);continue;case"[object Function]":try{l=l.call(n)}catch(e){if(this.errorOnFuncFailure)throw e;l=""}}var o=t+c;e=(e=this.__renderSection(e,o,l)).replace(new RegExp("{{"+o+"}}","g"),l)}return e},__renderSection:function(e,n,t){t=0===t||t&&("string"!=typeof t||t.trim().length);for(var r="{{#"+n+"}}",i="{{^"+n+"}}",c="{{/"+n+"}}",l=0,o=r.length+c.length;!(e.length<o||l&&l+1>=e.length);){var a=e.indexOf(r,l),s=e.indexOf(i,l),_=~a&&(!~s||a<s),f=_?a:s,h=!!~f&&e.indexOf(c,f);if(!1===h||!~h)break;l=(t?_:!_)?(e=e.slice(0,f)+e.slice(f+c.length,h)+e.slice(h+c.length),h-c.length):(e=0===f?e.slice(h+c.length):e.slice(0,f)+e.slice(h+c.length),f)}return e},__renderRepeatingSection:function(e,n,t,r){r=r?r+"."+n:n;var i="{{#"+n+"}}",c="{{/"+n+"}}",l=e.indexOf(i),o=!!~l&&e.indexOf(c,l);if(!1===o||!~o)return e;for(var a=e.substring(l+i.length,o),s="",_=0;_<t.length;++_)s+=this.__render(a,t[_],r);return 0===l?s+e.slice(o+c.length):e.slice(0,l)+s+e.slice(o+c.length)}}});