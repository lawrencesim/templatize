!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Templatize=t():e.Templatize=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);function r(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(e){if(!(t=i.exec(e)))throw new Error("invalid format: "+e);var t;return new a({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function a(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}o.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var c,s,l,u=function(e,t){var n=r(e,t);if(!n)return e+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")},f={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>u(100*e,t),r:u,s:function(e,t){var n=r(e,t);if(!n)return e+"";var i=n[0],o=n[1],a=o-(c=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+r(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)},h=function(e){return e},p=Array.prototype.map,d=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];s=function(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?h:(t=p.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,c=t[0],s=0;i>0&&c>0&&(s+c+1>r&&(c=Math.max(1,r-s)),o.push(e.substring(i-=c,i+c)),!((s+=c+1)>r));)c=t[a=(a+1)%t.length];return o.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",l=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?h:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(p.call(e.numerals,String)),g=void 0===e.percent?"%":e.percent+"",_=void 0===e.minus?"−":e.minus+"",v=void 0===e.nan?"NaN":e.nan+"";function m(e){var t=(e=o(e)).fill,n=e.align,r=e.sign,h=e.symbol,p=e.zero,m=e.width,y=e.comma,b=e.precision,x=e.trim,w=e.type;"n"===w?(y=!0,w="g"):f[w]||(void 0===b&&(b=12),x=!0,w="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var M="$"===h?a:"#"===h&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S="$"===h?s:/[%p]/.test(w)?g:"",j=f[w],O=/[defgprs%]/.test(w);function k(e){var o,a,s,f=M,h=S;if("c"===w)h=j(e)+h,e="";else{var g=(e=+e)<0||1/e<0;if(e=isNaN(e)?v:j(Math.abs(e),b),x&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),g&&0==+e&&"+"!==r&&(g=!1),f=(g?"("===r?r:_:"-"===r||"("===r?"":r)+f,h=("s"===w?d[8+c/3]:"")+h+(g&&"("===r?")":""),O)for(o=-1,a=e.length;++o<a;)if(48>(s=e.charCodeAt(o))||s>57){h=(46===s?l+e.slice(o+1):e.slice(o))+h,e=e.slice(0,o);break}}y&&!p&&(e=i(e,1/0));var k=f.length+e.length+h.length,z=k<m?new Array(m-k+1).join(t):"";switch(y&&p&&(e=i(z+e,z.length?m-h.length:1/0),z=""),n){case"<":e=f+e+h+z;break;case"=":e=f+z+e+h;break;case"^":e=z.slice(0,k=z.length>>1)+f+e+h+z.slice(k);break;default:e=z+f+e+h}return u(e)}return b=void 0===b?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b)),k.toString=function(){return e+""},k}return{format:m,formatPrefix:function(e,t){var n,i=m(((e=o(e)).type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor((n=t,((n=r(Math.abs(n)))?n[1]:NaN)/3)))),c=Math.pow(10,-a),s=d[8+a/3];return function(e){return i(c*e)+s}}}}({thousands:",",grouping:[3],currency:["$",""]}),l=s.format,s.formatPrefix,String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e});t.default={errorOnFuncFailure:!1,__objTester:{}.toString,render:function(e,t,n){var r=this.__render(e,t).replace(new RegExp("(?<!!){{![^}]*}}","g"),"");if(n)for(var i=r.indexOf("{{");~i;)if(i>0&&"!"===r[i-1])i=r.indexOf("{{",i+2);else{var o=r.indexOf("}}",i);if(!~o)break;i=(r=r.slice(0,i)+r.slice(o+2)).indexOf("{{")}return r},__render:function(e,t,n){if(!e)return"";var r=!1;if(null!=n){r=!0;var i=!("_display"in t)||t._display;e=this.__renderSection(e,n,i)}var o=r?n+".":"";for(var a in t)if("_display"!==a&&"_parent"!==a){var c=o+a,s=t[a];if(s)switch(this.__objTester.call(s)){case"[object Object]":s._parent||(s._parent=t),e=this.__render(e,s,c),delete s._parent;continue;case"[object Array]":s._parent||(s._parent=t),e=this.__renderList(e,c,s),e=this.__renderRepeatingSection(e,c,s),delete s._parent;continue;case"[object Function]":try{var l={};l[a]=s.call(t),l._parent||(l._parent=t),e=this.__render(e,l,n);continue}catch(e){if(this.errorOnFuncFailure)throw e;s=""}}e=this.__renderSection(e,c,s),e=this.__renderValue(e,c,s)}return e},__renderSection:function(e,t,n){n=0===n||n&&("string"!=typeof n||n.trim().length);for(var r="{{#".concat(t,"}}"),i="{{^".concat(t,"}}"),o="{{/".concat(t,"}}"),a=0,c=r.length+o.length;!(e.length<c||a&&a+1>=e.length);){var s=this.__indexOf(e,r,a),l=this.__indexOf(e,i,a),u=~s&&(!~l||s<l),f=u?s:l,h=!!~f&&this.__indexOf(e,o,f);if(!1===h||!~h)break;if(!~h)break;(n?u:!u)?(e=e.slice(0,f)+e.slice(f+o.length,h)+e.slice(h+o.length),a=h-o.length):(e=0===f?e.slice(h+o.length):e.slice(0,f)+e.slice(h+o.length),a=f)}return e},__renderRepeatingSection:function(e,t,n){var r="{{#".concat(t,"}}"),i="{{/".concat(t,"}}"),o=this.__indexOf(e,r),a=~o?this.__indexOf(e,i,o):-1;if(!~a)return e;for(var c=e.substring(o+r.length,a),s="",l=0;l<n.length;++l)"[object Object]"===this.__objTester.call(n[l])?"_display"in n[l]&&!n[l]._display||(n[l]._parent=n._parent,s+=this.__render(c,n[l],t),delete n[l]._parent):s+=this.__renderValue(c,"".concat(t,"."),n[l]);return e=0===o?s+e.slice(a+i.length):e.slice(0,o)+s+e.slice(a+i.length),this.__renderRepeatingSection(e,t,n)},__renderList:function(e,t,n){var r=this,i=!1;return e.replace(new RegExp("(?<!!){{(&".concat(t,")(?:::)?([^:}]*)?}}"),"g"),(function(e,t,o){if(!1!==i)return i;if(!n||!n.length)return i="";var a=n.map((function(e){return r.__format(e,o)}));return 1===a.length?i=a[0]:2===a.length?i="".concat(a[0]," and ").concat(a[1]):(i="",a.forEach((function(e,t){i+="".concat(t?", ":"").concat(t+1===a.length?"and ":"").concat(e)}))),i}))},__indexOf:function(e,t,n){for(var r=e.indexOf(t,n||0);r>0&&"!"===e[r-1];)r=e.indexOf(t,r+t.length);return r},__renderValue:function(e,t,n){var r=this;return e.replace(new RegExp("(?<!!){{(".concat(t,")(?:::)?([^:}]*)?}}"),"g"),(function(e,t,i){return r.__format(n,i)}))},__format:function(e,t){if(!t)return e;if(!isNaN(e)&&!isNaN(parseFloat(e)))return l(t)(e);switch(t.startsWith("^")&&(e=this.__escape(e),t=t.substr(1)),t){case"encode":return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");case"upper":return e.toString().toUpperCase();case"lower":return e.toString().toLowerCase();case"capitalize":return e.toString().replace(/(?:^|[^\w])[a-z]/g,(function(e){return"'s"===e?e:e.toUpperCase()}))}return e},__escape:function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}}}]).default}));