!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Templatize=e():t.Templatize=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);function n(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(t){if(!(e=i.exec(t)))throw new Error("invalid format: "+t);var e;return new a({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function a(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}o.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s,c,l,u=function(t,e){var r=n(t,e);if(!r)return t+"";var i=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")},f={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>u(100*t,e),r:u,s:function(t,e){var r=n(t,e);if(!r)return t+"";var i=r[0],o=r[1],a=o-(s=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,c=i.length;return a===c?i:a>c?i+new Array(a-c+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+n(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},h=function(t){return t},d=Array.prototype.map,p=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];c=function(t){var e,r,i=void 0===t.grouping||void 0===t.thousands?h:(e=d.call(t.grouping,Number),r=t.thousands+"",function(t,n){for(var i=t.length,o=[],a=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),o.push(t.substring(i-=s,i+s)),!((c+=s+1)>n));)s=e[a=(a+1)%e.length];return o.reverse().join(r)}),a=void 0===t.currency?"":t.currency[0]+"",c=void 0===t.currency?"":t.currency[1]+"",l=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?h:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(d.call(t.numerals,String)),_=void 0===t.percent?"%":t.percent+"",g=void 0===t.minus?"−":t.minus+"",v=void 0===t.nan?"NaN":t.nan+"";function m(t){var e=(t=o(t)).fill,r=t.align,n=t.sign,h=t.symbol,d=t.zero,m=t.width,y=t.comma,b=t.precision,w=t.trim,x=t.type;"n"===x?(y=!0,x="g"):f[x]||(void 0===b&&(b=12),w=!0,x="g"),(d||"0"===e&&"="===r)&&(d=!0,e="0",r="=");var S="$"===h?a:"#"===h&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",M="$"===h?c:/[%p]/.test(x)?_:"",A=f[x],j=/[defgprs%]/.test(x);function T(t){var o,a,c,f=S,h=M;if("c"===x)h=A(t)+h,t="";else{var _=(t=+t)<0||1/t<0;if(t=isNaN(t)?v:A(Math.abs(t),b),w&&(t=function(t){t:for(var e,r=t.length,n=1,i=-1;n<r;++n)switch(t[n]){case".":i=e=n;break;case"0":0===i&&(i=n),e=n;break;default:if(!+t[n])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),_&&0==+t&&"+"!==n&&(_=!1),f=(_?"("===n?n:g:"-"===n||"("===n?"":n)+f,h=("s"===x?p[8+s/3]:"")+h+(_&&"("===n?")":""),j)for(o=-1,a=t.length;++o<a;)if(48>(c=t.charCodeAt(o))||c>57){h=(46===c?l+t.slice(o+1):t.slice(o))+h,t=t.slice(0,o);break}}y&&!d&&(t=i(t,1/0));var T=f.length+t.length+h.length,O=T<m?new Array(m-T+1).join(e):"";switch(y&&d&&(t=i(O+t,O.length?m-h.length:1/0),O=""),r){case"<":t=f+t+h+O;break;case"=":t=f+O+t+h;break;case"^":t=O.slice(0,T=O.length>>1)+f+t+h+O.slice(T);break;default:t=O+f+t+h}return u(t)}return b=void 0===b?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b)),T.toString=function(){return t+""},T}return{format:m,formatPrefix:function(t,e){var r,i=m(((t=o(t)).type="f",t)),a=3*Math.max(-8,Math.min(8,Math.floor((r=e,((r=n(Math.abs(r)))?r[1]:NaN)/3)))),s=Math.pow(10,-a),c=p[8+a/3];return function(t){return i(s*t)+c}}}}({thousands:",",grouping:[3],currency:["$",""]}),l=c.format,c.formatPrefix;var _={findTag:function(t,e,r,n){return this.__findTag(t,e,r,n)},findSection:function(t,e,r,n){if(!n||!n.as||!n.as.length)throw"Opening section tag must have leading directive";var i={},o={};for(var a in n){if("split"===a)throw"Section tags cannot have trailing directives";i[a]=n[a],o[a]="as"===a?"/":n[a]}var s,c=this.findTag(t,e,r,i);if(s=this.__findTag(t,e,r,o),!c&&!s)return null;if(!c||s.start<c.start)throw"Improper section nesting (for: #".concat(r,")");function l(t,e){return{open:t,close:null,as:t.as,nest:[],inner:[],_up:e}}var u,f=l(c),h=f,d=0;for(i.search=f.open.end;++d;){if(d>100)throw"Section search call stack size exceeded (for: #".concat(r,")");if((u=this.__findTag(t,e,r,i))&&u.start<s.start)f.nest.push(l(u,f)),f=f.nest[f.nest.length-1],i.search=f.open.end;else{if(f.close=s,f.nest.length?function(){var e=f.open.end;f.inner=[],f.nest.forEach((function(r,n){f.inner.push(t.slice(e,r.open.start)),e=r.close.end})),f.inner.push(t.slice(e,f.close.start))}():f.inner=[t.slice(f.open.end,f.close.start)],!f._up){delete f._up;break}if(o.search=f.close.end,!(s=this.__findTag(t,e,r,o)))throw"Improper section nesting (for: #".concat(r,")");u=f,f=f._up,delete u._up}}return h},__findTag:function(t,e,r,n){var i=(n=n||{}).as||!1,o=n.split||!1,a=n.search||0;i&&!Array.isArray(i)&&(i=[i]),o&&!Array.isArray(o)&&(o=[o]);for(var s,c,l=-1,u=-1,f=-1,h=[];;){if(!~(l=this.indexOf(t,e[0],a)))return null;if(u=l+e[0].length,!~(f=this.indexOf(t,e[1],a)))return null;if(a=f+e[1].length,c=t.slice(u,f).trim(),s=-1,i){if(!~(s=i.indexOf(c[0])))continue;c=c.slice(1)}if(o&&o.length&&(c=[c],o.forEach((function(t){var e=c.length;e>1?(--e,c=c.slice(0,e).concat(c[e].split(t))):c=c[0].split(t)})),c.length>1&&(h=c.slice(1)),c=c[0]),void 0===r||c===r)return{as:~s?i[s]:void 0,start:l,end:a,directives:h}}},indexOf:function(t,e,r){for(var n=t.indexOf(e,r||0);n>0&&"!"===t[n-1];)n=t.indexOf(e,n+e.length);return n},format:function(t,e){if(null==t)return"";if(t=t.toString(),!e)return t;if(!isNaN(t)&&!isNaN(parseFloat(t)))return l(e)(t);switch(e.startsWith("^")&&(t=this.escape(t),e=e.slice(1)),e){case"encode":return this.escape(t);case"upper":return t.toUpperCase();case"lower":return t.toLowerCase();case"capitalize":return t.replace(/(?:^|[^\w])[a-z]/g,(function(t){return"'s"===t?t:t.toUpperCase()}))}return t},escape:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}};function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var v=function(t){if(t=t||{},this.__delimiters=t.delimiters||["{{","}}"],this.errorOnFuncFailure=t.errorOnFuncFailure||!1,this.evalZeroAsTrue=t.evalZeroAsTrue||!1,!Array.isArray(this.__delimiters)||this.__delimiters.length<2)throw"Invalid delimiters supplied";this.__delimiters=this.__delimiters.map((function(t){return t.trim()})),this.render=function(t,e,r){this.__data={template:t,root:e};try{var n=this.__render(this.__data.template,e,null);return n=this.__renderValue(n,void 0,"","!"),r&&(n=this.__renderValue(n,void 0,"")),n}finally{this.__data=null}},this.__render=function(t,e,r){if(!t)return"";var n=!1;if(null!=r){n=!0;var i=!("_display"in e)||e._display;t=this.__renderSection(t,r,i)}var o,a,s=n?r+".":"";for(var c in e)if("_display"!==c&&"_parent"!==c){if(o=e[c],a=s+(c=c.trim()),o){if(Array.isArray(o)){t=this.__renderList(t,a,o,e),t=this.__renderRepeatingSection(t,a,o,e);continue}switch(g(o)){case"function":try{if(c.startsWith("~"))continue;var l={};l[a]=o.call(e),l._parent||(l._parent=e),t=this.__render(t,l,null);continue}catch(t){if(this.errorOnFuncFailure)throw t;console.error(t),o="";break}case"object":o._parent||(o._parent=e),t=this.__renderFunctionContext(t,a,o),t=this.__render(t,o,a),delete o._parent}}t=this.__renderSection(t,a,o),t=this.__renderValue(t,a,o)}return t},this.__renderValue=function(t,e,r,n){for(var i={split:["::"],as:n||!1},o=_.findTag(t,this.__delimiters,e,i);o;){var a=!!o.directives.length&&o.directives[0],s=_.format(r,a);t=t.slice(0,o.start)+s+t.slice(o.end),i.search=o.start+s.length,o=_.findTag(t,this.__delimiters,e,i)}return t},this.__renderList=function(t,e,r,n){for(var i=this,o={split:["::"],as:"&"},a=_.findTag(t,this.__delimiters,e,o),s=function(){var s=!!a.directives.length&&a.directives[0],c=r.map((function(t){if(Array.isArray(t))throw"Multi-dimensional arrays not supported (for: ".concat(e,")");for(var r=0;"function"==typeof t&&++r<=20;)t=t.call(n);if("object"===g(t))throw"List items cannot be objects (for: ".concat(e,")");return _.format(t,s)})),l=void 0;switch(c.length){case 1:l=c[0];break;case 2:l="".concat(c[0]," and ").concat(c[1]);break;default:l="",c.forEach((function(t,e){l+="".concat(e?", ":"").concat(e+1===c.length?"and ":"").concat(t)}))}t=t.slice(0,a.start)+l+t.slice(a.end),o.search=a.start+l.length,a=_.findTag(t,i.__delimiters,e,o)};a;)s();return t},this.__renderSectionAbstract=function(t,e,r,n){for(var i,o,a={search:0,as:r};i=_.findSection(t,this.__delimiters,e,a);)o=n(i),t=t.slice(0,i.open.start)+o+t.slice(i.close.end),a.search=i.open.start+o.length;return t},this.__renderSection=function(t,e,r){return r=this.evalZeroAsTrue&&0===r||r&&("string"!=typeof r||r.trim().length),this.__renderSectionAbstract(t,e,["#","^"],(function t(e){if("#"===e.as?!r:r)return"";var n=[e.inner[0]];return e.nest.forEach((function(r,i){n.push(t(r),e.inner[i+1])})),n.join("")}))},this.__renderRepeatingSection=function(t,e,r,n){var i=this;return this.__renderSectionAbstract(t,e,"#",(function t(o){var a=o.inner[0];o.nest.forEach((function(e,r){a+=t(e)+o.inner[r+1]}));var s="";return r.forEach((function(t){if(Array.isArray(t))throw"Multi-dimensional arrays not supported (for: ".concat(e,")");for(var r,o=0;"function"==typeof t&&++o<=20;)t=t.call(n);switch(g(t)){case"object":if("_display"in t&&!t._display)break;t._parent=n,r=i.__renderFunctionContext(a,e,t),r=i.__render(r,t,e),delete t._parent;break;default:r=i.__renderValue(a,"".concat(e,"."),t)}s+=r})),s}))},this.__renderFunctionContext=function(t,e,r){for(var n,i=this,o={split:["~","::"]},a=_.findTag(t,this.__delimiters,e,o);a;){if(n="",a.directives.length){var s=a.directives[0],c=a.directives.length>1&&a.directives[1];try{!function(){var t=s.split("."),e=i.__data.root;t.forEach((function(r,n){e=e[t[n]]||e["~"+t[n]]})),n=_.format(e.call(r),c)}()}catch(t){if(this.errorOnFuncFailure)throw t;console.error(t),n=""}t=t.slice(0,a.start)+n+t.slice(a.end),o.search=a.start+n.length}else o.search=a.end;a=_.findTag(t,this.__delimiters,e,o)}return t}},m={};v.call(m),m.custom=function(t){var e={};return v.call(e,t),e};e.default=m}]).default}));