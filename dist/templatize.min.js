!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Templatize=e():t.Templatize=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);function n(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(t){if(!(e=i.exec(t)))throw new Error("invalid format: "+t);var e;return new o({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function o(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}a.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s,c,l,u=function(t,e){var r=n(t,e);if(!r)return t+"";var i=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")},f={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>u(100*t,e),r:u,s:function(t,e){var r=n(t,e);if(!r)return t+"";var i=r[0],a=r[1],o=a-(s=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,c=i.length;return o===c?i:o>c?i+new Array(o-c+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+n(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},d=function(t){return t},h=Array.prototype.map,p=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];c=function(t){var e,r,i=void 0===t.grouping||void 0===t.thousands?d:(e=h.call(t.grouping,Number),r=t.thousands+"",function(t,n){for(var i=t.length,a=[],o=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),a.push(t.substring(i-=s,i+s)),!((c+=s+1)>n));)s=e[o=(o+1)%e.length];return a.reverse().join(r)}),o=void 0===t.currency?"":t.currency[0]+"",c=void 0===t.currency?"":t.currency[1]+"",l=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?d:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(h.call(t.numerals,String)),g=void 0===t.percent?"%":t.percent+"",_=void 0===t.minus?"−":t.minus+"",v=void 0===t.nan?"NaN":t.nan+"";function m(t){var e=(t=a(t)).fill,r=t.align,n=t.sign,d=t.symbol,h=t.zero,m=t.width,y=t.comma,b=t.precision,x=t.trim,w=t.type;"n"===w?(y=!0,w="g"):f[w]||(void 0===b&&(b=12),x=!0,w="g"),(h||"0"===e&&"="===r)&&(h=!0,e="0",r="=");var M="$"===d?o:"#"===d&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S="$"===d?c:/[%p]/.test(w)?g:"",T=f[w],j=/[defgprs%]/.test(w);function A(t){var a,o,c,f=M,d=S;if("c"===w)d=T(t)+d,t="";else{var g=(t=+t)<0||1/t<0;if(t=isNaN(t)?v:T(Math.abs(t),b),x&&(t=function(t){t:for(var e,r=t.length,n=1,i=-1;n<r;++n)switch(t[n]){case".":i=e=n;break;case"0":0===i&&(i=n),e=n;break;default:if(!+t[n])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),g&&0==+t&&"+"!==n&&(g=!1),f=(g?"("===n?n:_:"-"===n||"("===n?"":n)+f,d=("s"===w?p[8+s/3]:"")+d+(g&&"("===n?")":""),j)for(a=-1,o=t.length;++a<o;)if(48>(c=t.charCodeAt(a))||c>57){d=(46===c?l+t.slice(a+1):t.slice(a))+d,t=t.slice(0,a);break}}y&&!h&&(t=i(t,1/0));var A=f.length+t.length+d.length,k=A<m?new Array(m-A+1).join(e):"";switch(y&&h&&(t=i(k+t,k.length?m-d.length:1/0),k=""),r){case"<":t=f+t+d+k;break;case"=":t=f+k+t+d;break;case"^":t=k.slice(0,A=k.length>>1)+f+t+d+k.slice(A);break;default:t=k+f+t+d}return u(t)}return b=void 0===b?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b)),A.toString=function(){return t+""},A}return{format:m,formatPrefix:function(t,e){var r,i=m(((t=a(t)).type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor((r=e,((r=n(Math.abs(r)))?r[1]:NaN)/3)))),s=Math.pow(10,-o),c=p[8+o/3];return function(t){return i(s*t)+c}}}}({thousands:",",grouping:[3],currency:["$",""]}),l=c.format,c.formatPrefix;var g={findTag:function(t,e,r,n){var i=(n=n||{}).as||!1,a=n.search||0,o=n.split||[],s=n.closing||!1;o&&!Array.isArray(o)&&(o=[o]);var c=this.__findTag(t,e,r,i,o,a);if(!s||!c)return c;var l=this.__findTag(t,e,r,"/",null,c.end);return l?{open:c,close:l,inner:t.slice(c.end,l.start)}:null},__findTag:function(t,e,r,n,i,a){a=a||0;for(var o,s=-1,c=-1,l=-1,u=[];;){if(!~(s=this.indexOf(t,e[0],a)))return null;if(c=s+e[0].length,!~(l=this.indexOf(t,e[1],a)))return null;if(a=l+e[1].length,o=t.slice(c,l).trim(),n){if(o[0]!=n)continue;o=o.slice(1)}if(i&&i.length&&(o=[o],i.forEach((function(t){var e=o.length;e>1?(--e,o=o.slice(0,e).concat(o[e].split(t))):o=o[0].split(t)})),o.length>1&&(u=o.slice(1)),o=o[0]),void 0===r||o===r)return{start:s,end:a,directives:u}}},indexOf:function(t,e,r){for(var n=t.indexOf(e,r||0);n>0&&"!"===t[n-1];)n=t.indexOf(e,n+e.length);return n},format:function(t,e){if(null==t)return"";if(t=t.toString(),!e)return t;if(!isNaN(t)&&!isNaN(parseFloat(t)))return l(e)(t);switch(e.startsWith("^")&&(t=this.escape(t),e=e.slice(1)),e){case"encode":return this.escape(t);case"upper":return t.toUpperCase();case"lower":return t.toLowerCase();case"capitalize":return t.replace(/(?:^|[^\w])[a-z]/g,(function(t){return"'s"===t?t:t.toUpperCase()}))}return t},escape:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}};function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var v=function(t){t=t||{},this.__delimiters=t.delimiters||["{{","}}"],this.errorOnFuncFailure=t.errorOnFuncFailure||!1,this.evalZeroAsTrue=t.evalZeroAsTrue||!1,this.__data,this.render=function(t,e,r){this.__data={html:t,root:e};var n=this.__render(this.__data.html,e,null);return n=this.__renderValue(n,void 0,"","!"),r&&(n=this.__renderValue(n,void 0,"")),n},this.__render=function(t,e,r){if(!t)return"";var n=!1;if(null!=r){n=!0;var i=!("_display"in e)||e._display;t=this.__renderSection(t,r,i)}var a,o,s=n?r+".":"";for(var c in e)if("_display"!==c&&"_parent"!==c){if(a=e[c],o=s+(c=c.trim()),a){if(Array.isArray(a)){t=this.__renderList(t,o,a,e),t=this.__renderRepeatingSection(t,o,a,e);continue}switch(_(a)){case"object":a._parent||(a._parent=e),t=this.__renderFunctionContext(t,o,a),t=this.__render(t,a,o),delete a._parent;break;case"function":try{if(c.startsWith("~"))continue;var l={};l[o]=a.call(e),l._parent||(l._parent=e),t=this.__render(t,l,null);continue}catch(t){if(this.errorOnFuncFailure)throw t;console.error(t),a="";break}}}t=this.__renderSection(t,o,a),t=this.__renderValue(t,o,a)}return t},this.__renderValue=function(t,e,r,n){for(var i={split:["::"],as:n||!1},a=g.findTag(t,this.__delimiters,e,i);a;){var o=!!a.directives.length&&a.directives[0],s=g.format(r,o);t=t.slice(0,a.start)+s+t.slice(a.end),i.search=a.start+s.length,a=g.findTag(t,this.__delimiters,e,i)}return t},this.__renderList=function(t,e,r,n){for(var i=this,a={split:["::"],as:"&"},o=g.findTag(t,this.__delimiters,e,a),s=function(){var s=!!o.directives.length&&o.directives[0],c=r.map((function(t){if(Array.isArray(t))throw"Multi-dimensional arrays not supported (".concat(e,")");for(var r=0;"function"==typeof t&&++r<=20;)t=t.call(n);if("object"===_(t))throw"List items cannot be objects (".concat(e,")");return g.format(t,s)})),l=void 0;switch(c.length){case 1:l=c[0];break;case 2:l="".concat(c[0]," and ").concat(c[1]);break;default:l="",c.forEach((function(t,e){l+="".concat(e?", ":"").concat(e+1===c.length?"and ":"").concat(t)}))}t=t.slice(0,o.start)+l+t.slice(o.end),a.search=o.start+l.length,o=g.findTag(t,i.__delimiters,e,a)};o;)s();return t},this.__renderSection=function(t,e,r){r=this.evalZeroAsTrue&&0===r||r&&("string"!=typeof r||r.trim().length);for(var n={search:0,as:"#"},i={search:0,as:"^"},a={search:0,as:"/"},o=null,s=null,c=!0,l=null,u=null;o=g.findTag(t,this.__delimiters,e,n),s=g.findTag(t,this.__delimiters,e,i),((c=o&&(!s||o.start<s.start))||s)&&(l=c?o:s,a.search=l.end,u=g.findTag(t,this.__delimiters,e,a));)if(r?c:!c){t=t.slice(0,l.start)+t.slice(l.end,u.start)+t.slice(u.end);var f=l.start+(u.start-l.end);n.search=i.search=f}else t=0===l.start?t.slice(u.end):t.slice(0,l.start)+t.slice(u.end),n.search=i.search=l.start;return t},this.__renderRepeatingSection=function(t,e,r,n){for(var i,a=this,o={search:0,closing:!0,as:"#"},s=function(){if(!(i=g.findTag(t,a.__delimiters,e,o)))return"break";var s=i.inner,c="";r.forEach((function(t){if(Array.isArray(t))throw"Multi-dimensional arrays not supported (".concat(e,")");for(var r=0;"function"==typeof t&&++r<=20;)t=t.call(n);switch(_(t)){case"object":if("_display"in t&&!t._display)break;t._parent=n;var i=a.__renderFunctionContext(s,e,t);c+=a.__render(i,t,e),delete t._parent;break;default:c+=a.__renderValue(s,"".concat(e,"."),t)}})),t=0===i.open.start?c+t.slice(i.close.end):t.slice(0,i.open.start)+c+t.slice(i.close.end),o.search=i.open.start+c.length};;){if("break"===s())break}return t},this.__renderFunctionContext=function(t,e,r){for(var n,i=this,a={split:["~","::"]},o=g.findTag(t,this.__delimiters,e,a);o;){if(n="",o.directives.length){var s=o.directives[0],c=o.directives.length>1&&o.directives[1];try{!function(){var t=s.split("."),e=i.__data.root;t.forEach((function(r,n){e=e[t[n]]||e["~"+t[n]]})),n=g.format(e.call(r),c)}()}catch(t){if(this.errorOnFuncFailure)throw t;console.error(t),n=""}t=t.slice(0,o.start)+n+t.slice(o.end)}a.search=o.start+n.length,o=g.findTag(t,this.__delimiters,e,a)}return t}},m={};v.call(m),m.custom=function(t){return v(t)};e.default=m}]).default}));